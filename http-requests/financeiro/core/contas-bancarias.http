### Criar conta bancária - Conta Corrente Principal (múltiplas unidades)
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "{{bancoId}}",
  "unidades_ids": ["{{unidadeId}}"],
  "codigo_interno": "CC001",
  "nome_conta": "Conta Corrente Principal",
  "tipo_conta": "corrente",
  "agencia": "1234",
  "digito_agencia": "5",
  "numero_conta": "12345678",
  "digito_conta": "9",
  "observacoes": "Conta principal para recebimentos"
}

### Expected Response
# Status: 201 Created
# {
#   "id": "uuid",
#   "banco_id": "uuid",
#   "unidades_vinculadas": [
#     {
#       "id": "uuid",
#       "unidade_saude_id": "uuid",
#       "unidade_saude": { ... },
#       "ativo": true
#     }
#   ],
#   ...
# }

###

### Criar conta bancária - Compartilhada entre 2 unidades
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "{{bancoId}}",
  "unidades_ids": ["{{unidadeId}}", "{{unidadeId2}}"],
  "codigo_interno": "CC002",
  "nome_conta": "Conta Compartilhada",
  "tipo_conta": "corrente",
  "agencia": "1234",
  "numero_conta": "87654321",
  "digito_conta": "0",
  "observacoes": "Conta compartilhada entre matriz e filial"
}

### Expected Response
# Status: 201 Created
# {
#   "id": "uuid",
#   "banco_id": "uuid",
#   "banco": {
#     "id": "uuid",
#     "nome": "Banco do Brasil S.A."
#   },
#   "unidade_saude_id": "uuid",
#   "codigo_interno": "CC001",
#   "nome_conta": "Conta Corrente Principal",
#   "tipo_conta": "corrente",
#   ...
# }

###

### Criar conta bancária - Conta Poupança
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "{{bancoId}}",
  "unidade_saude_id": "{{unidadeId}}",
  "codigo_interno": "CP001",
  "nome_conta": "Conta Poupança Reserva",
  "tipo_conta": "poupanca",
  "agencia": "1234",
  "numero_conta": "00012345",
  "digito_conta": "8"
}

###

### Listar todas as contas bancárias (sem paginação - padrão: página 1, 10 itens)
GET {{baseUrl}}/financeiro/contas-bancarias
Authorization: Bearer {{token}}

### Expected Response
# {
#   "data": [...],
#   "meta": {
#     "page": 1,
#     "limit": 10,
#     "total": 50,
#     "totalPages": 5,
#     "hasPrevPage": false,
#     "hasNextPage": true
#   }
# }

###

### Listar contas bancárias com paginação - Página 1, 10 itens
GET {{baseUrl}}/financeiro/contas-bancarias?page=1&limit=10
Authorization: Bearer {{token}}

###

### Listar contas bancárias com paginação - Página 2, 20 itens
GET {{baseUrl}}/financeiro/contas-bancarias?page=2&limit=20
Authorization: Bearer {{token}}

###

### FILTROS COMBINADOS

### Buscar contas por texto (agência, número da conta ou nome do banco)
GET {{baseUrl}}/financeiro/contas-bancarias?search=1234
Authorization: Bearer {{token}}

### Exemplos de busca:
# - search=1234 → Busca por agência "1234"
# - search=12345678 → Busca por número de conta "12345678"
# - search=Brasil → Busca por banco "Banco do Brasil"

###

### Filtrar por tipo de conta
GET {{baseUrl}}/financeiro/contas-bancarias?tipo=corrente
Authorization: Bearer {{token}}

###

### Filtrar por banco
GET {{baseUrl}}/financeiro/contas-bancarias?banco_id={{bancoId}}
Authorization: Bearer {{token}}

###

### Filtrar por unidade
GET {{baseUrl}}/financeiro/contas-bancarias?unidade_id={{unidadeId}}
Authorization: Bearer {{token}}

###

### Combinar múltiplos filtros - Exemplo 1: Contas correntes
GET {{baseUrl}}/financeiro/contas-bancarias?tipo=corrente
Authorization: Bearer {{token}}

###

### Combinar múltiplos filtros - Exemplo 2: Buscar por agência "1234" nas contas correntes
GET {{baseUrl}}/financeiro/contas-bancarias?search=1234&tipo=corrente
Authorization: Bearer {{token}}

###

### Combinar múltiplos filtros - Exemplo 3: Todos os filtros + paginação
GET {{baseUrl}}/financeiro/contas-bancarias?search=1234&tipo=corrente&page=1&limit=10
Authorization: Bearer {{token}}

###

### Combinar múltiplos filtros - Exemplo 4: Contas de um banco específico
GET {{baseUrl}}/financeiro/contas-bancarias?banco_id={{bancoId}}
Authorization: Bearer {{token}}

###

### Combinar múltiplos filtros - Exemplo 5: Contas de uma unidade que são poupança
GET {{baseUrl}}/financeiro/contas-bancarias?unidade_id={{unidadeId}}&tipo=poupanca
Authorization: Bearer {{token}}

###

### Listar contas ativas
GET {{baseUrl}}/financeiro/contas-bancarias/ativas
Authorization: Bearer {{token}}

###

### Buscar contas por unidade
GET {{baseUrl}}/financeiro/contas-bancarias/unidade/{{unidadeId}}
Authorization: Bearer {{token}}

###

### Buscar contas por banco
GET {{baseUrl}}/financeiro/contas-bancarias/banco/{{bancoId}}
Authorization: Bearer {{token}}

###

### Buscar contas por tipo
GET {{baseUrl}}/financeiro/contas-bancarias/tipo/corrente
Authorization: Bearer {{token}}

###

### Buscar conta por código interno
GET {{baseUrl}}/financeiro/contas-bancarias/codigo/CC001
Authorization: Bearer {{token}}

###

### Buscar conta por ID
GET {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Authorization: Bearer {{token}}

###

### Atualizar conta bancária - Alterar dados básicos
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "observacoes": "Conta atualizada - observação modificada"
}

###

### Atualizar conta bancária - Adicionar mais unidades vinculadas
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "unidades_ids": ["{{unidadeId}}", "{{unidadeId2}}"]
}

### Expected Response
# Status: 200 OK
# {
#   "id": "uuid",
#   "banco_id": "uuid",
#   "unidades_vinculadas": [
#     {
#       "id": "uuid",
#       "conta_bancaria_id": "uuid",
#       "unidade_saude_id": "uuid-1",
#       "unidade_saude": { ... },
#       "ativo": true
#     },
#     {
#       "id": "uuid",
#       "conta_bancaria_id": "uuid",
#       "unidade_saude_id": "uuid-2",
#       "unidade_saude": { ... },
#       "ativo": true
#     }
#   ],
#   ...
# }

###

### Atualizar conta bancária - Remover unidades (deixar apenas uma)
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "unidades_ids": ["{{unidadeId}}"]
}

###

### Atualizar conta bancária - Trocar unidades vinculadas completamente
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "unidades_ids": ["{{unidadeId2}}", "{{unidadeId3}}"]
}

### Expected Response
# Os vínculos antigos são removidos e apenas as novas unidades ficam vinculadas

###

### Atualizar conta bancária - Alterar dados E unidades ao mesmo tempo
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "observacoes": "Conta compartilhada entre 3 unidades - atualizada",
  "unidades_ids": ["{{unidadeId}}", "{{unidadeId2}}", "{{unidadeId3}}"]
}

###

### Deletar conta bancária
DELETE {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Authorization: Bearer {{token}}