### ================================================================
### CONTAS BANCÁRIAS - CRUD E OPERAÇÕES
### ================================================================

### Criar conta bancária - Conta Corrente Principal
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "{{bancoId}}",
  "tipo_conta": "corrente",
  "agencia": "1234",
  "digito_agencia": "5",
  "numero_conta": "12345678",
  "digito_conta": "9",
  "status": "ativo",
  "chave_pix": "12345678000190",
  "observacoes": "Conta principal para recebimentos",
  "unidades_ids": ["{{unidadeId}}"]
}

### Expected Response
# Status: 201 Created
# {
#   "id": "uuid",
#   "banco_id": "uuid",
#   "tipo_conta": "corrente",
#   "agencia": "1234",
#   "numero_conta": "12345678",
#   "status": "ativo",
#   "chave_pix": "12345678000190",
#   "unidades_vinculadas": [
#     {
#       "id": "uuid",
#       "unidade_saude_id": "uuid",
#       "ativo": true
#     }
#   ],
#   ...
# }

###

### Criar conta bancária - Sem vincular unidades (opcional)
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "{{bancoId}}",
  "tipo_conta": "corrente",
  "agencia": "4567",
  "numero_conta": "98765432",
  "digito_conta": "1",
  "status": "ativo",
  "chave_pix": "email@empresa.com.br",
  "observacoes": "Conta sem unidade vinculada"
}

###

### Criar conta bancária - Conta Poupança
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "{{bancoId}}",
  "tipo_conta": "poupanca",
  "agencia": "1234",
  "numero_conta": "00012345",
  "digito_conta": "8",
  "status": "ativo"
}

###

### Criar conta bancária - Compartilhada entre múltiplas unidades
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "{{bancoId}}",
  "tipo_conta": "corrente",
  "agencia": "1234",
  "numero_conta": "87654321",
  "digito_conta": "0",
  "status": "ativo",
  "chave_pix": "+5511999998888",
  "observacoes": "Conta compartilhada entre matriz e filial",
  "unidades_ids": ["{{unidadeId}}", "{{unidadeId2}}"]
}

###

### ================================================================
### CRIAÇÃO EM LOTE (BATCH)
### ================================================================

### Criar múltiplas contas em lote
POST {{baseUrl}}/financeiro/contas-bancarias/batch
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "contas": [
    {
      "banco_id": "{{bancoId}}",
      "tipo_conta": "corrente",
      "agencia": "0001",
      "numero_conta": "11111111",
      "digito_conta": "1",
      "status": "ativo",
      "chave_pix": "conta1@empresa.com",
      "observacoes": "Conta 1 - Lote"
    },
    {
      "banco_id": "{{bancoId}}",
      "tipo_conta": "poupanca",
      "agencia": "0001",
      "numero_conta": "22222222",
      "digito_conta": "2",
      "status": "ativo",
      "observacoes": "Conta 2 - Lote"
    },
    {
      "banco_id": "{{bancoId}}",
      "tipo_conta": "corrente",
      "agencia": "0001",
      "numero_conta": "33333333",
      "digito_conta": "3",
      "status": "ativo",
      "chave_pix": "33333333000199",
      "unidades_ids": ["{{unidadeId}}"]
    }
  ]
}

### Expected Response
# Status: 201 Created
# {
#   "criadas": [
#     { "id": "uuid-1", "tipo_conta": "corrente", ... },
#     { "id": "uuid-2", "tipo_conta": "poupanca", ... },
#     { "id": "uuid-3", "tipo_conta": "corrente", ... }
#   ],
#   "erros": []
# }

###

### Criar em lote - Com algumas contas que podem falhar
POST {{baseUrl}}/financeiro/contas-bancarias/batch
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "contas": [
    {
      "banco_id": "{{bancoId}}",
      "tipo_conta": "corrente",
      "agencia": "0001",
      "numero_conta": "44444444",
      "digito_conta": "4",
      "status": "ativo"
    },
    {
      "banco_id": "{{bancoId}}",
      "tipo_conta": "corrente",
      "agencia": "0001",
      "numero_conta": "44444444",
      "digito_conta": "4",
      "status": "ativo"
    }
  ]
}

### Expected Response (segunda conta falha por duplicidade)
# Status: 201 Created
# {
#   "criadas": [
#     { "id": "uuid-1", ... }
#   ],
#   "erros": [
#     {
#       "index": 1,
#       "erro": "Já existe uma conta bancária com agência 0001 e conta 44444444 para este banco"
#     }
#   ]
# }

###

### ================================================================
### LISTAGEM E PAGINAÇÃO
### ================================================================

### Listar todas as contas bancárias (padrão: página 1, 10 itens)
GET {{baseUrl}}/financeiro/contas-bancarias
Authorization: Bearer {{token}}

### Expected Response
# {
#   "data": [...],
#   "meta": {
#     "page": 1,
#     "limit": 10,
#     "total": 50,
#     "totalPages": 5,
#     "hasPrevPage": false,
#     "hasNextPage": true
#   }
# }

###

### Listar contas bancárias com paginação
GET {{baseUrl}}/financeiro/contas-bancarias?page=1&limit=10
Authorization: Bearer {{token}}

###

### Listar contas bancárias - Página 2
GET {{baseUrl}}/financeiro/contas-bancarias?page=2&limit=20
Authorization: Bearer {{token}}

###

### ================================================================
### FILTROS
### ================================================================

### Buscar por texto (agência, número da conta ou nome do banco)
GET {{baseUrl}}/financeiro/contas-bancarias?search=1234
Authorization: Bearer {{token}}

###

### Filtrar por tipo de conta
GET {{baseUrl}}/financeiro/contas-bancarias?tipo=corrente
Authorization: Bearer {{token}}

### Tipos disponíveis: corrente, poupanca, pagamento, salario, investimento

###

### Filtrar por banco
GET {{baseUrl}}/financeiro/contas-bancarias?banco_id={{bancoId}}
Authorization: Bearer {{token}}

###

### Filtrar por unidade
GET {{baseUrl}}/financeiro/contas-bancarias?unidade_id={{unidadeId}}
Authorization: Bearer {{token}}

###

### Combinar múltiplos filtros
GET {{baseUrl}}/financeiro/contas-bancarias?search=1234&tipo=corrente&page=1&limit=10
Authorization: Bearer {{token}}

###

### ================================================================
### BUSCA ESPECÍFICA
### ================================================================

### Listar contas ativas
GET {{baseUrl}}/financeiro/contas-bancarias/ativas
Authorization: Bearer {{token}}

###

### Buscar contas por unidade
GET {{baseUrl}}/financeiro/contas-bancarias/unidade/{{unidadeId}}
Authorization: Bearer {{token}}

###

### Buscar contas por banco
GET {{baseUrl}}/financeiro/contas-bancarias/banco/{{bancoId}}
Authorization: Bearer {{token}}

###

### Buscar contas por tipo
GET {{baseUrl}}/financeiro/contas-bancarias/tipo/corrente
Authorization: Bearer {{token}}

###

### Buscar conta por ID
GET {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Authorization: Bearer {{token}}

###

### ================================================================
### ATUALIZAÇÃO
### ================================================================

### Atualizar conta bancária - Alterar status
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "status": "inativo"
}

### Status disponíveis: ativo, inativo, suspenso

###

### Atualizar conta bancária - Adicionar chave PIX
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "chave_pix": "nova.chave@empresa.com"
}

###

### Atualizar conta bancária - Alterar observações
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "observacoes": "Conta atualizada - nova observação"
}

###

### Atualizar conta bancária - Vincular a unidades
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "unidades_ids": ["{{unidadeId}}", "{{unidadeId2}}"]
}

### Nota: unidades_ids substitui completamente os vínculos existentes

###

### Atualizar conta bancária - Remover todas unidades
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "unidades_ids": []
}

###

### Atualizar conta bancária - Múltiplos campos
PATCH {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "status": "ativo",
  "chave_pix": "11999998888",
  "observacoes": "Conta compartilhada - atualizada",
  "unidades_ids": ["{{unidadeId}}", "{{unidadeId2}}", "{{unidadeId3}}"]
}

###

### ================================================================
### EXCLUSÃO
### ================================================================

### Deletar conta bancária
DELETE {{baseUrl}}/financeiro/contas-bancarias/{{contaId}}
Authorization: Bearer {{token}}
