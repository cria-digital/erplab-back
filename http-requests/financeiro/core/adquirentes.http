### Listar todos os adquirentes (paginado)
GET {{baseUrl}}/financeiro/adquirentes
Authorization: Bearer {{token}}

### Expected Response
# Status: 200 OK
# {
#   "data": [
#     {
#       "id": "uuid",
#       "codigo_interno": "ADQ001",
#       "nome_adquirente": "PicPay",
#       "status": "ativo",
#       ...
#     }
#   ],
#   "meta": {
#     "page": 1,
#     "limit": 10,
#     "total": 50,
#     "totalPages": 5,
#     "hasPrevPage": false,
#     "hasNextPage": true
#   }
# }

###

### Listar com paginação personalizada (página 1, 5 itens)
GET {{baseUrl}}/financeiro/adquirentes?page=1&limit=5
Authorization: Bearer {{token}}

###

### Listar com paginação (página 2, 10 itens)
GET {{baseUrl}}/financeiro/adquirentes?page=2&limit=10
Authorization: Bearer {{token}}

###

### Listar com filtro por status
GET {{baseUrl}}/financeiro/adquirentes?status=ativo
Authorization: Bearer {{token}}

###

### Listar com filtro por unidade
GET {{baseUrl}}/financeiro/adquirentes?unidade={{unidadeSaudeId}}
Authorization: Bearer {{token}}

###

### Pesquisar por nome ou código
GET {{baseUrl}}/financeiro/adquirentes?pesquisar=PicPay
Authorization: Bearer {{token}}

###

### Filtros combinados com paginação
GET {{baseUrl}}/financeiro/adquirentes?status=ativo&pesquisar=pic&page=1&limit=20
Authorization: Bearer {{token}}

###

### Obter estatísticas (total, ativos, inativos)
GET {{baseUrl}}/financeiro/adquirentes/estatisticas
Authorization: Bearer {{token}}

### Expected Response
# Status: 200 OK
# {
#   "total": 10,
#   "ativos": 8,
#   "inativos": 2
# }

###

### Buscar adquirentes por status (endpoint dedicado)
GET {{baseUrl}}/financeiro/adquirentes/status/ativo
Authorization: Bearer {{token}}

###

### Buscar adquirentes por unidade de saúde (endpoint dedicado)
GET {{baseUrl}}/financeiro/adquirentes/unidade/{{unidadeSaudeId}}
Authorization: Bearer {{token}}

###

### Buscar adquirente por ID
GET {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}
Authorization: Bearer {{token}}

### Expected Response
# Status: 200 OK
# {
#   "id": "uuid",
#   "codigo_interno": "ADQ001",
#   "nome_adquirente": "PicPay",
#   "descricao": "Adquirente para pagamentos digitais",
#   "conta_bancaria_id": "uuid",
#   "tipos_cartao": [
#     { "id": "uuid", "tipo_cartao_id": "uuid", "tipo_cartao": { "id": "uuid", "textoAlternativa": "Mastercard" }, "ativo": true },
#     { "id": "uuid", "tipo_cartao_id": "uuid", "tipo_cartao": { "id": "uuid", "textoAlternativa": "Visa" }, "ativo": true }
#   ],
#   "opcao_parcelamento_id": "uuid-da-alternativa",
#   "opcao_parcelamento": { "id": "uuid", "textoAlternativa": "12x" },
#   "taxa_transacao": 1.5,
#   "taxa_parcelamento": 3.0,
#   "percentual_repasse": 10.0,
#   "prazo_repasse": "5 dias úteis",
#   "status": "ativo",
#   "integracao_id": null,
#   "validade_configuracao_api": "2026-12-31",
#   "chave_contingencia": "chave_api_alternativa",
#   "unidades_associadas": [...],
#   "restricoes": [...],
#   "created_at": "2025-01-01T00:00:00.000Z",
#   "updated_at": "2025-01-01T00:00:00.000Z"
# }

###

### Criar adquirente completo
POST {{baseUrl}}/financeiro/adquirentes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "codigo_interno": "ADQ001",
  "nome_adquirente": "PicPay",
  "descricao": "Adquirente para pagamentos digitais",
  "conta_bancaria_id": "{{contaBancariaId}}",
  "tipos_cartao_ids": ["{{tipoCartaoMastercardId}}", "{{tipoCartaoVisaId}}", "{{tipoCartaoPixId}}"],
  "opcao_parcelamento_id": "{{opcaoParcelamentoId}}",
  "taxa_transacao": 1.5,
  "taxa_parcelamento": 3.0,
  "percentual_repasse": 10.0,
  "prazo_repasse": "5 dias úteis",
  "validade_configuracao_api": "2026-12-31",
  "chave_contingencia": "chave_api_alternativa_123",
  "unidades_associadas": [
    {
      "unidade_saude_id": "{{unidadeSaudeId}}",
      "ativo": true
    }
  ],
  "restricoes": [
    {
      "unidade_saude_id": "{{unidadeSaudeId}}",
      "restricao_id": "{{restricaoAdquirenteId}}",
      "valor_restricao": "6x"
    }
  ]
}

### Expected Response
# Status: 201 Created
# { ... adquirente criado ... }

###

### Criar adquirente simples
POST {{baseUrl}}/financeiro/adquirentes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "codigo_interno": "ADQ002",
  "nome_adquirente": "Cielo",
  "conta_bancaria_id": "e9ab557a-c408-4ff3-9635-b066f5732031",
  "tipos_cartao_ids": ["{{tipoCartaoMastercardId}}", "{{tipoCartaoVisaId}}", "{{tipoCartaoEloId}}"],
  "opcao_parcelamento_id": "{{opcaoParcelamentoId}}",
  "taxa_transacao": 1.2,
  "percentual_repasse": 8.0,
  "prazo_repasse": "30 dias"
}

###

### Atualizar adquirente
PATCH {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "nome_adquirente": "PicPay Atualizado",
  "taxa_transacao": 1.8,
  "prazo_repasse": "3 dias úteis"
}

###

### Atualizar unidades associadas
PATCH {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "unidades_associadas": [
    {
      "unidade_saude_id": "{{unidadeSaudeId}}",
      "ativo": true
    }
  ]
}

###

### Atualizar tipos de cartão suportados
PATCH {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "tipos_cartao_ids": ["{{tipoCartaoMastercardId}}", "{{tipoCartaoVisaId}}", "{{tipoCartaoEloId}}", "{{tipoCartaoAmericanExpressId}}"]
}

###

### Atualizar restrições
PATCH {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "restricoes": [
    {
      "unidade_saude_id": "{{unidadeSaudeId}}",
      "restricao_id": "{{restricaoAdquirenteId}}",
      "valor_restricao": "R$ 5.000"
    }
  ]
}

###

### Alternar status (ativo/inativo)
PATCH {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}/toggle-status
Authorization: Bearer {{token}}

###

### Vincular integração ao adquirente
PATCH {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}/vincular-integracao
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "integracao_id": "{{integracaoId}}",
  "validade_configuracao_api": "2026-12-31",
  "chave_contingencia": "chave_api_alternativa_backup"
}

###

### Desvincular integração do adquirente
DELETE {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}/desvincular-integracao
Authorization: Bearer {{token}}

###

### Testar conexão com a integração vinculada
POST {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}/testar-conexao
Authorization: Bearer {{token}}

### Expected Response
# Status: 200 OK
# {
#   "sucesso": true,
#   "mensagem": "Conexão estabelecida com sucesso"
# }

###

### Adicionar unidade ao adquirente
POST {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}/unidades/{{unidadeSaudeId}}
Authorization: Bearer {{token}}

###

### Remover unidade do adquirente
DELETE {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}/unidades/{{unidadeSaudeId}}
Authorization: Bearer {{token}}

###

### Adicionar restrição ao adquirente
POST {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}/restricoes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "unidade_saude_id": "{{unidadeSaudeId}}",
  "restricao_id": "{{restricaoAdquirenteId}}",
  "valor_restricao": "6x"
}

###

### Remover restrição do adquirente
DELETE {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}/restricoes/{{restricaoId}}
Authorization: Bearer {{token}}

###

### Excluir adquirente
DELETE {{baseUrl}}/financeiro/adquirentes/{{adquirenteId}}
Authorization: Bearer {{token}}


