### Criar Unidade de Saúde com Múltiplas Contas Bancárias
# Exemplo demonstrando suporte a múltiplas contas bancárias
#
# FLUXO CORRETO:
# 1. Primeiro cadastre as contas bancárias em: POST {{baseUrl}}/financeiro/contas-bancarias
# 2. Depois vincule as contas à unidade usando os IDs retornados
#
# IMPORTANTE:
# - conta_bancaria_id: UUID de conta já cadastrada em /financeiro/contas-bancarias
# - cnaePrincipalId e cnaeId: UUIDs da tabela cnaes

### Passo 1: Criar conta bancária 1 (Banco do Brasil)
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "2eccbdb8-5bf4-4c70-b5ce-9d94a0611137",
  "agencia": "1234",
  "digito_agencia": "5",
  "numero_conta": "98765",
  "digito_conta": "4",
  "tipo_conta": "corrente",
  "observacoes": "Conta principal para recebimentos"
}

### Passo 2: Criar conta bancária 2 (Bradesco)
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "SUBSTITUA-PELO-UUID-DO-BRADESCO",
  "agencia": "5678",
  "digito_agencia": "9",
  "numero_conta": "11111",
  "digito_conta": "2",
  "tipo_conta": "corrente",
  "observacoes": "Conta para pagamento de fornecedores"
}

### Passo 3: Criar conta bancária 3 (Caixa - Poupança)
POST {{baseUrl}}/financeiro/contas-bancarias
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "banco_id": "SUBSTITUA-PELO-UUID-DA-CAIXA",
  "agencia": "9999",
  "numero_conta": "22222",
  "digito_conta": "8",
  "tipo_conta": "poupanca",
  "observacoes": "Conta reserva/poupança"
}

### Passo 4: Criar Unidade de Saúde vinculando as 3 contas
# Substitua os conta_bancaria_id pelos UUIDs retornados nos passos anteriores
POST {{baseUrl}}/cadastros/unidades-saude
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "nomeUnidade": "Laboratório Multi-Contas",
  "codigoInterno": "LAB-MC-001",
  "cnpj": "98765432000199",
  "razaoSocial": "Laboratório Multi-Contas LTDA",
  "nomeFantasia": "LabMC",
  "inscricaoMunicipal": "999888",
  "inscricaoEstadual": "111222333",
  "cnes": "9876543",
  "contatosUnidade": "(11) 5555-6666",
  "email": "contato@labmc.com.br",
  "codigoServicoPrincipal": "001",
  "codigoServicoSecundario": ["002"],
  "cnaePrincipalId": "29d3b071-9a5d-450e-b0c0-5e0a2289c434",
  "cep": "01310100",
  "rua": "Avenida Paulista",
  "numero": "1000",
  "bairro": "Bela Vista",
  "complemento": "Andar 5",
  "estado": "SP",
  "cidade": "São Paulo",
  "nomeResponsavel": "Dra. Maria Santos",
  "contatoResponsavel": "(11) 99999-8888",
  "emailResponsavel": "dra.maria@labmc.com.br",
  "irrfPercentual": 1.5,
  "pisPercentual": 0.65,
  "cofinsPercentual": 3,
  "csllPercentual": 1,
  "issPercentual": 5,
  "ibsPercentual": 0,
  "cbsPercentual": 0,
  "reterIss": false,
  "reterIr": false,
  "reterPcc": false,
  "reterIbs": false,
  "reterCbs": false,
  "optanteSimplesNacional": false,
  "certificadoDigitalVinculado": false,
  "ativo": true,
  "horariosAtendimento": [
    {
      "diaSemana": "SEGUNDA",
      "horarioInicio": "08:00",
      "horarioFim": "17:00",
      "semIntervalo": true
    },
    {
      "diaSemana": "TERCA",
      "horarioInicio": "08:00",
      "horarioFim": "17:00",
      "semIntervalo": true
    }
  ],
  "contas_bancarias": [
    { "conta_bancaria_id": "UUID-CONTA-BB-DO-PASSO-1" },
    { "conta_bancaria_id": "UUID-CONTA-BRADESCO-DO-PASSO-2" },
    { "conta_bancaria_id": "UUID-CONTA-CAIXA-DO-PASSO-3" }
  ],
  "cnaeSecundarios": [
    {
      "cnaeId": "29d3b071-9a5d-450e-b0c0-5e0a2289c434"
    }
  ]
}

### Expected Response
# Status: 201 Created
# {
#   "id": "uuid-gerado",
#   "nomeUnidade": "Laboratório Multi-Contas",
#   "cnpj": "98765432000199",
#   "contas_bancarias": [
#     {
#       "id": "uuid-vinculo-1",
#       "conta_bancaria_id": "uuid-conta-bb",
#       "conta_bancaria": {
#         "id": "uuid-conta-bb",
#         "agencia": "1234",
#         "numero_conta": "98765",
#         "banco": { "codigo": "001", "nome": "Banco do Brasil" }
#       }
#     },
#     {
#       "id": "uuid-vinculo-2",
#       "conta_bancaria_id": "uuid-conta-bradesco",
#       "conta_bancaria": { ... }
#     },
#     {
#       "id": "uuid-vinculo-3",
#       "conta_bancaria_id": "uuid-conta-caixa",
#       "conta_bancaria": { ... }
#     }
#   ]
# }

### ========================================
### Observações sobre Múltiplas Contas
#
# 1. Contas bancárias são cadastradas SEPARADAMENTE no módulo financeiro
#    - POST /financeiro/contas-bancarias
#
# 2. No cadastro de unidade, apenas VINCULE contas existentes
#    - Array de objetos com conta_bancaria_id
#
# 3. Cada conta pode ser vinculada a múltiplas unidades
#
# 4. Para listar contas disponíveis:
#    - GET /financeiro/contas-bancarias
#    - GET /financeiro/contas-bancarias/ativas
#
# 5. Para remover vínculo, atualize a unidade sem a conta:
#    - PATCH /cadastros/unidades-saude/{id}
#    - Envie apenas as contas que devem permanecer vinculadas
