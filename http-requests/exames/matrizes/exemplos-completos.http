### ===========================================
### EXEMPLO: Fluxo Completo de Matriz de Exame
### ===========================================

### 1. Criar Matriz de Hemograma com Campos
POST {{baseUrl}}/exames/matrizes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "codigoInterno": "HEM-COMPLETO-001",
  "nome": "Hemograma Completo Padrao",
  "tipoExameId": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
  "exameId": "f47ac10b-58cc-4372-a567-0e02b2c3d480",
  "templateDados": {
    "titulo": "HEMOGRAMA COMPLETO",
    "secoes": ["Serie Vermelha", "Serie Branca", "Plaquetas"]
  },
  "campos": [
    {
      "codigoCampo": "hemacias",
      "label": "Hemacias",
      "tipoCampo": "decimal",
      "unidadeMedida": "personalizada",
      "unidadeMedidaCustomizada": "milhoes/mm3",
      "valorReferenciaMin": 4.5,
      "valorReferenciaMax": 6.0,
      "obrigatorio": true,
      "ordemExibicao": 1,
      "secao": "Serie Vermelha"
    },
    {
      "codigoCampo": "hemoglobina",
      "label": "Hemoglobina",
      "tipoCampo": "decimal",
      "unidadeMedida": "g_dL",
      "valorReferenciaMin": 13.0,
      "valorReferenciaMax": 17.0,
      "obrigatorio": true,
      "ordemExibicao": 2,
      "secao": "Serie Vermelha"
    },
    {
      "codigoCampo": "hematocrito",
      "label": "Hematocrito",
      "tipoCampo": "decimal",
      "unidadeMedida": "percentual",
      "valorReferenciaMin": 40,
      "valorReferenciaMax": 54,
      "obrigatorio": true,
      "ordemExibicao": 3,
      "secao": "Serie Vermelha"
    },
    {
      "codigoCampo": "leucocitos",
      "label": "Leucocitos",
      "tipoCampo": "numero",
      "unidadeMedida": "personalizada",
      "unidadeMedidaCustomizada": "/mm3",
      "valorReferenciaMin": 4000,
      "valorReferenciaMax": 11000,
      "obrigatorio": true,
      "ordemExibicao": 4,
      "secao": "Serie Branca"
    },
    {
      "codigoCampo": "plaquetas",
      "label": "Plaquetas",
      "tipoCampo": "numero",
      "unidadeMedida": "personalizada",
      "unidadeMedidaCustomizada": "mil/mm3",
      "valorReferenciaMin": 150,
      "valorReferenciaMax": 400,
      "obrigatorio": true,
      "ordemExibicao": 5,
      "secao": "Plaquetas"
    }
  ]
}

### 2. Listar Todas as Matrizes
GET {{baseUrl}}/exames/matrizes
Authorization: Bearer {{token}}

### 3. Buscar Matriz por Codigo
GET {{baseUrl}}/exames/matrizes/codigo/HEM-COMPLETO-001
Authorization: Bearer {{token}}

### 4. Duplicar Matriz para Pediatria
POST {{baseUrl}}/exames/matrizes/{id}/duplicar
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "codigoInterno": "HEM-PEDIATRIA-001",
  "nome": "Hemograma Completo - Pediatria"
}

### 5. Atualizar Valores de Referencia da Copia
PATCH {{baseUrl}}/exames/matrizes/{id}
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "campos": [
    {
      "codigoCampo": "hemacias",
      "label": "Hemacias",
      "tipoCampo": "decimal",
      "unidadeMedida": "personalizada",
      "unidadeMedidaCustomizada": "milhoes/mm3",
      "valorReferenciaMin": 4.0,
      "valorReferenciaMax": 5.5,
      "textoReferencia": "Valores de referencia para criancas",
      "obrigatorio": true,
      "ordemExibicao": 1
    }
  ]
}

### 6. Obter Estatisticas
GET {{baseUrl}}/exames/matrizes/stats
Authorization: Bearer {{token}}

### 7. Desativar Matriz Antiga
PATCH {{baseUrl}}/exames/matrizes/{id}/desativar
Authorization: Bearer {{token}}
